"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[193],{9849:(e,t,n)=>{n.d(t,{u:()=>s});var l=n(2784),a=n(1718),o=n(3100);const r=window.AudioContext||window.webkitAudioContext,i=(e,t,n,l,a)=>{e.lineWidth=1,e.strokeStyle="#94b398",e.beginPath(),n=a?n:-n,e.moveTo(t,0),e.lineTo(t,n),e.arc(t+l/2,n,l/2,Math.PI,0,a),e.lineTo(t+l,0),e.stroke()};function s({src:e,progress:t}){const n=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const t=new r;fetch(e).then((e=>e.arrayBuffer())).then((e=>(0,a.kS)(t,e))).then((e=>((e,t,n=window.devicePixelRatio||1)=>{e.width=e.offsetWidth*n,e.height=(e.offsetHeight+40)*n;const l=e.getContext("2d");l.scale(n,n),l.translate(0,e.offsetHeight/2+20);const a=e.offsetWidth/t.length;for(let n=0;n<t.length;n++){const o=a*n;let r=t[n]*e.offsetHeight-20;r<0?r=0:r>e.offsetHeight/2&&(r=r>e.offsetHeight/2),i(l,o,r,a,(n+1)%2)}})(n.current,(e=>{const t=Math.pow(Math.max(...e),-1);return e.map((e=>e*t))})((e=>{const t=e.getChannelData(0),n=Math.floor(t.length/250),l=[];for(let e=0;e<250;e++){let a=n*e,o=0;for(let e=0;e<n;e++)o+=Math.abs(t[a+e]);l.push(o/n)}return l})(e))))).catch(console.error)}),[e]),l.createElement("div",{className:o.Z.Waveform},l.createElement("div",{className:o.Z.Progress,style:{width:100*t+"%"}}),l.createElement("canvas",{ref:n}))}},8193:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var l=n(2784),a=n(9477),o=n.n(a),r=n(9849),i=n(1718),s=n(3738);const c=window.AudioContext||window.webkitAudioContext;function u({src:e,progress:t}){const[n,a]=(0,l.useState)(null),o=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const t=new c;fetch(e).then((e=>e.arrayBuffer())).then((e=>(0,i.kS)(t,e))).then((e=>{const t=function(e){for(var t=22050,n=e[0].length/t,l=[],a=0;a<n;a++){for(var o=0,r=a*t;r<(a+1)*t;r++){var i=Math.max(Math.abs(e[0][r]),Math.abs(e[1][r]));(!o||i>o.volume)&&(o={position:r,volume:i})}l.push(o)}return l.sort((function(e,t){return t.volume-e.volume})),(l=l.splice(0,.5*l.length)).sort((function(e,t){return e.position-t.position})),l}([e.getChannelData(0),e.getChannelData(1)]),n=function(e){var t=[];return e.forEach((function(n,l){for(var a=1;l+a<e.length&&a<10;a++){for(var o={tempo:2646e3/(e[l+a].position-n.position),count:1};o.tempo<90;)o.tempo*=2;for(;o.tempo>180;)o.tempo/=2;o.tempo=Math.round(o.tempo),t.some((function(e){return e.tempo===o.tempo?e.count++:0}))||t.push(o)}})),t}(t);console.log({peaks:t,groups:n});const l=n.sort(((e,t)=>t.count-e.count)).splice(0,5);console.log(`Guess for track ${Math.round(l[0].tempo)} BPM with ${l[0].count} samples`),console.log(`Other options are ${l.slice(1).map((e=>`${e.tempo} BPM (${e.count})`)).join(", ")}`),a(t.map((({position:t})=>100*t/e.length+"%")))})).catch(console.error)}),[e]),l.createElement("div",{className:s.Z.Beats},l.createElement("div",{className:s.Z.Progress,style:{width:100*t+"%"}}),l.createElement("svg",{width:"100%"},n?.map(((e,t)=>l.createElement("rect",{key:t,x:e,y:"0",width:"1",height:"100%"}))),l.createElement("rect",{ref:o,id:"progress",y:"0",width:"1",height:"100%"})))}const d=new(o());function f(){const[e,t]=(0,l.useState)(null),[n,a]=(0,l.useState)(null),[o,i]=(0,l.useState)(null),[c,f]=(0,l.useState)(null),m=(0,l.useRef)(),h=(0,l.useRef)();return(0,l.useEffect)((()=>{e&&o&&(d.setAccessToken(e),d.searchTracks(o).then((e=>Boolean(console.log(`Search tracks by "${o}" in the artist name`,e))||f(e)),console.error))}),[e,o]),l.createElement("div",{className:s.Z.Search},l.createElement("h2",null,"Search"),l.createElement("div",null,l.createElement("label",null,l.createElement("span",null,"Token"),l.createElement("input",{ref:h,defaultValue:"",onFocus:e=>e.target.select()}))),l.createElement("div",null,l.createElement("label",null,l.createElement("span",null,"Query"),l.createElement("input",{ref:m,defaultValue:"artist:BeyoncÃ©"})),l.createElement("button",{onClick:e=>t(h.current.value.trim())||i(m.current.value.trim())},"Find")),n&&l.createElement("div",null,l.createElement("video",{key:n,controls:!0,autoPlay:!1,name:"media"},l.createElement("source",{src:n,type:"audio/mpeg"})),l.createElement(r.u,{src:n}),l.createElement(u,{src:n})),l.createElement("ul",null,c?.tracks?.items.map((({album:e,id:t,name:n,preview_url:o,type:r})=>l.createElement("li",{key:t},l.createElement("div",null,"id: ",r," ",t),l.createElement("div",null,"name: ",n),l.createElement("div",null,"preview_url:"," ",l.createElement("a",{href:o,onClick:e=>e.preventDefault()||a(o)},o)),(({artists:e,id:t,images:n,name:a,type:o})=>l.createElement("div",null,l.createElement("div",null,"id: ",o," ",t),l.createElement("div",null,"artists: ",e.map((({name:e})=>e)).join(", ")),l.createElement("div",null,"name: ",a),l.createElement("div",null,n.sort((({width:e},{width:t})=>e-t)).slice(0,1).map((({width:e,height:t,url:n},o)=>l.createElement("img",{key:o,src:n,width:e,height:t,alt:a}))))))(e))))),l.createElement("pre",null,JSON.stringify(c,null,2)))}},7789:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var l=n(9601),a=n.n(l),o=n(2609),r=n.n(o)()(a());r.push([e.id,".CKgSghNKpREBuzbA7Ykt{display:flex;flex-direction:column}.MN3HVNw04LViHBlky330{display:flex;flex-direction:row;margin:2rem;align-items:center}.WkiRKpF351IO1uxS5kA_{width:4em;height:4em;margin:1em;border:2px solid currentColor;border-radius:50%}.veOat6GMQHaV_OvPnyuJ{color:green}.w3mVggYuPlb6ubmpMj69{color:red}.MMKvc1s1Dmbxl193AhLd{flex:1;margin:1em;position:relative}.MMKvc1s1Dmbxl193AhLd canvas{display:block;width:100%;height:8em}.MMKvc1s1Dmbxl193AhLd .hQ3Xho1E4oM84JfXXQSA{position:absolute;z-index:-1;left:0;width:0;top:0;bottom:0;background-color:#d3d3d3}",""]),r.locals={Player:"CKgSghNKpREBuzbA7Ykt",Container:"MN3HVNw04LViHBlky330",Button:"WkiRKpF351IO1uxS5kA_",Button__Play:"veOat6GMQHaV_OvPnyuJ",Button__Stop:"w3mVggYuPlb6ubmpMj69",Waveform:"MMKvc1s1Dmbxl193AhLd",Progress:"hQ3Xho1E4oM84JfXXQSA"};const i=r},204:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var l=n(9601),a=n.n(l),o=n(2609),r=n.n(o)()(a());r.push([e.id,".lfeSvZW11NcsdblvlBkp{display:flex;flex-direction:column}.vx6pGbp7BjnjJLBxpT0i{flex:1;margin:1em;position:relative}.vx6pGbp7BjnjJLBxpT0i svg{display:block;width:100%;height:8em}.vx6pGbp7BjnjJLBxpT0i .F0CuPTVNlnd9xRr0meI0{position:absolute;z-index:-1;left:0;width:0;top:0;bottom:0;background-color:#d3d3d3}",""]),r.locals={Search:"lfeSvZW11NcsdblvlBkp",Beats:"vx6pGbp7BjnjJLBxpT0i",Progress:"F0CuPTVNlnd9xRr0meI0"};const i=r},3100:(e,t,n)=>{n.d(t,{Z:()=>w});var l=n(6062),a=n.n(l),o=n(4036),r=n.n(o),i=n(6793),s=n.n(i),c=n(7892),u=n.n(c),d=n(1173),f=n.n(d),m=n(2464),h=n.n(m),p=n(7789),v={};v.styleTagTransform=h(),v.setAttributes=u(),v.insert=s().bind(null,"head"),v.domAPI=r(),v.insertStyleElement=f();var g=a()(p.default,v);if(!p.default.locals||e.hot.invalidate){var E=!p.default.locals,b=E?p:p.default.locals;e.hot.accept(7789,(t=>{p=n(7789),function(e,t,n){if(!e&&t||e&&!t)return!1;var l;for(l in e)if((!n||"default"!==l)&&e[l]!==t[l])return!1;for(l in t)if(!(n&&"default"===l||e[l]))return!1;return!0}(b,E?p:p.default.locals,E)?(b=E?p:p.default.locals,g(p.default)):e.hot.invalidate()}))}e.hot.dispose((function(){g()}));const w=p.default&&p.default.locals?p.default.locals:void 0},3738:(e,t,n)=>{n.d(t,{Z:()=>w});var l=n(6062),a=n.n(l),o=n(4036),r=n.n(o),i=n(6793),s=n.n(i),c=n(7892),u=n.n(c),d=n(1173),f=n.n(d),m=n(2464),h=n.n(m),p=n(204),v={};v.styleTagTransform=h(),v.setAttributes=u(),v.insert=s().bind(null,"head"),v.domAPI=r(),v.insertStyleElement=f();var g=a()(p.default,v);if(!p.default.locals||e.hot.invalidate){var E=!p.default.locals,b=E?p:p.default.locals;e.hot.accept(204,(t=>{p=n(204),function(e,t,n){if(!e&&t||e&&!t)return!1;var l;for(l in e)if((!n||"default"!==l)&&e[l]!==t[l])return!1;for(l in t)if(!(n&&"default"===l||e[l]))return!1;return!0}(b,E?p:p.default.locals,E)?(b=E?p:p.default.locals,g(p.default)):e.hot.invalidate()}))}e.hot.dispose((function(){g()}));const w=p.default&&p.default.locals?p.default.locals:void 0}}]);