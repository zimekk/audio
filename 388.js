"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[388],{3759:(e,t,n)=>{n.d(t,{u:()=>c});var r=n(2784),a=n(7528),o=n(3100);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=window.AudioContext||window.webkitAudioContext,u=function(e,t,n,r,a){e.lineWidth=1,e.strokeStyle="#94b398",e.beginPath(),n=a?n:-n,e.moveTo(t,0),e.lineTo(t,n),e.arc(t+r/2,n,r/2,Math.PI,0,a),e.lineTo(t+r,0),e.stroke()};function c(e){var t=e.src,n=e.progress,c=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=new i;fetch(t).then((function(e){return e.arrayBuffer()})).then((function(t){return(0,a.kS)(e,t)})).then((function(e){return console.log({audioBuffer:e})||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.devicePixelRatio||1,r=20;e.width=e.offsetWidth*n,e.height=(e.offsetHeight+2*r)*n;var a=e.getContext("2d");a.scale(n,n),a.translate(0,e.offsetHeight/2+r);for(var o=e.offsetWidth/t.length,l=0;l<t.length;l++){var i=o*l,c=t[l]*e.offsetHeight-r;c<0?c=0:c>e.offsetHeight/2&&(c=c>e.offsetHeight/2),u(a,i,c,o,(l+1)%2)}}(c.current,(n=function(e){for(var t=e.getChannelData(0),n=Math.floor(t.length/250),r=[],a=0;a<250;a++){for(var o=n*a,l=0,i=0;i<n;i++)l+=Math.abs(t[o+i]);r.push(l/n)}return r}(e),r=Math.pow(Math.max.apply(Math,function(e){if(Array.isArray(e))return l(e)}(t=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),-1),n.map((function(e){return e*r}))));var t,n,r})).catch(console.error)}),[t]),r.createElement("div",{className:o.Z.Waveform},r.createElement("div",{className:o.Z.Progress,style:{width:"".concat(100*n,"%")}}),r.createElement("canvas",{ref:c}))}},2388:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var r=n(2784),a=n(9477),o=n.n(a),l=n(7528),i=n(3738);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=window.AudioContext||window.webkitAudioContext;function s(e){var t,n,a=e.src,o=e.progress,s=(t=(0,r.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],d=s[1];return(0,r.useEffect)((function(){var e=new c;fetch(a).then((function(e){return e.arrayBuffer()})).then((function(t){return(0,l.kS)(e,t)})).then((function(e){var t=function(e){for(var t=22050,n=e[0].length/t,r=[],a=0;a<n;a++){for(var o=0,l=a*t;l<(a+1)*t;l++){var i=Math.max(Math.abs(e[0][l]),Math.abs(e[1][l]));(!o||i>o.volume)&&(o={position:l,volume:i})}r.push(o)}return r.sort((function(e,t){return t.volume-e.volume})),(r=r.splice(0,.5*r.length)).sort((function(e,t){return e.position-t.position})),r}([e.getChannelData(0),e.getChannelData(1)]),n=function(e){var t=[];return e.forEach((function(n,r){for(var a=1;r+a<e.length&&a<10;a++){for(var o={tempo:2646e3/(e[r+a].position-n.position),count:1};o.tempo<90;)o.tempo*=2;for(;o.tempo>180;)o.tempo/=2;o.tempo=Math.round(o.tempo),t.some((function(e){return e.tempo===o.tempo?e.count++:0}))||t.push(o)}})),t}(t);console.log({peaks:t,groups:n});var r=n.sort((function(e,t){return t.count-e.count})).splice(0,5);console.log("Guess for track ".concat(Math.round(r[0].tempo)," BPM with ").concat(r[0].count," samples")),console.log("Other options are ".concat(r.slice(1).map((function(e){return"".concat(e.tempo," BPM (").concat(e.count,")")})).join(", "))),d(t.map((function(t){var n=t.position;return"".concat(100*n/e.length,"%")})))})).catch(console.error)}),[a]),r.createElement("div",{className:i.Z.Beats},r.createElement("div",{className:i.Z.Progress,style:{width:"".concat(100*o,"%")}}),r.createElement("svg",{width:"100%"},null==f?void 0:f.map((function(e,t){return r.createElement("rect",{key:t,x:e,y:"10%",width:"1",height:"80%"})})),r.createElement("rect",{className:i.Z.ProgressBar,x:"".concat(100*o,"%"),y:"0",width:"1",height:"100%"})))}var f=n(35),d=n.n(f),m=n(5392),h=n.n(m);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n,r,a,o,l){try{var i=e[o](l),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){y(o,r,a,l,i,"next",e)}function i(e){y(o,r,a,l,i,"throw",e)}l(void 0)}))}}var w=window.AudioContext||window.webkitAudioContext;function x(){return(x=b(regeneratorRuntime.mark((function e(t,n,r,a,o){var l,i,u,c,s,f,d,m,h,p,v,g,y,b,w,x,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(null==a&&(a=r),null==o&&(o={}),l=1/0,i=-1/0,u=0;u<n.length;++u)(c=n[u])!==-1/0&&(c<l&&(l=c),c>i&&(i=c));if(!(l>=i)){e.next=7;break}return e.abrupt("return");case 7:(s=t.getContext("2d")).clearRect(0,0,t.width,t.height),f=n.length/r,null!=o.pixelsPerFrame&&(d=Math.round(o.pixelsPerFrame*f),null!=o.maxPixelWidth&&d>o.maxPixelWidth&&(d=o.maxPixelWidth),t.width=d),m=t.width/f,h=t.height/a,p=0;case 14:if(!(p<f)){e.next=23;break}if(v=m*p,(g=n.subarray(p*r,(p+1)*r))[0]!==-1/0){e.next=19;break}return e.abrupt("break",23);case 19:for(y=0;y<a;++y)b=t.height-(y+1)*h,w=(g[y]-l)/(i-l),w=Math.pow(w,3),w=Math.round(255*w),x="rgb(".concat(w,",").concat(255-w,",").concat(255-w,")"),s.fillStyle=x,s.fillRect(v,b,m,h);case 20:++p,e.next=14;break;case 23:if(!o.markKeyFrame){e.next=41;break}if(null!=o.keyFrameIndex){e.next=30;break}return e.next=27,SpeechCommands.getMaxIntensityFrameIndex({data:n,frameSize:r}).data();case 27:e.t0=e.sent,e.next=31;break;case 30:e.t0=o.keyFrameIndex;case 31:E=e.t0,s.strokeStyle="black",s.beginPath(),s.moveTo(m*E,0),s.lineTo(m*E,.1*t.height),s.stroke(),s.beginPath(),s.moveTo(m*E,.9*t.height),s.lineTo(m*E,t.height),s.stroke();case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){var t,n=e.src,a=e.progress,o=v((0,r.useState)(""),2),u=o[0],c=o[1],s=v((0,r.useState)(null),2),f=s[0],m=s[1],g=v((0,r.useState)(100),2),y=g[0],b=g[1],E=v((0,r.useState)(100),2),k=E[0],S=E[1],A=v((0,r.useState)(2),2),M=A[0],P=A[1],C=(0,r.useRef)(null),B=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=new w,t=B.current=d()(C.current,{audio:{enable:!0},colors:function(e){for(var t=new(h().scale)([[0,0,255,1],[0,255,255,1],[0,255,0,1],[255,255,0,1],[255,0,0,1]],[0,.15,.3,.5,.75]).domain([0,e]),n=[],r=0;r<e;++r){var a=t(r);n.push(a.hex())}return n}});Object.assign(window,{spectro:t}),fetch(n).then((function(e){return e.arrayBuffer()})).then((function(t){return(0,l.kS)(e,t)})).then((function(n){t.connectSource(n,e),m(n.getChannelData(0))})).catch(console.error)}),[n]),(0,r.useEffect)((function(){switch(u){case"playing":B.current[B.current._paused?"resume":"start"]();break;case"paused":B.current.pause()}}),[u]),(0,r.useEffect)((function(){f&&function(e,t,n,r,a){x.apply(this,arguments)}(C.current,f.slice(0,44100*Number(M)/10),Number(y))}),[f,y,k,M]),r.createElement("div",{className:i.Z.Spectrogram},r.createElement("div",null,r.createElement("input",{type:"range",min:10,max:1e3,value:y,onChange:function(e){var t=e.target;return b(t.value)}})," ",y,r.createElement("input",{type:"range",min:10,max:1e3,value:k,onChange:function(e){var t=e.target;return S(t.value)}})," ",k,r.createElement("input",{type:"range",min:1,max:120,value:M,onChange:function(e){var t=e.target;return P(t.value)}})," ",M),(t={},p(t,"",r.createElement("button",{onClick:function(){return c("playing")}},"Play")),p(t,"playing",r.createElement("button",{onClick:function(){return c("paused")}},"Pause")),p(t,"paused",r.createElement("button",{onClick:function(){return c("playing")}},"Resume")),t)[u],r.createElement("div",{className:i.Z.Progress,style:{width:"".concat(100*a,"%")}}),r.createElement("canvas",{ref:C,id:"canvas"}),r.createElement("div",{id:"word-div"}))}var k=n(3759);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=new(o());function P(e){var t=e.src,n=S((0,r.useState)(0),2),a=n[0],o=n[1],l=(0,r.useRef)(),i=(0,r.useRef)();return(0,r.useEffect)((function(){var e=l.current;function t(){e.paused||(e.duration&&o(e.currentTime/e.duration),i.current=requestAnimationFrame(t))}return e.addEventListener("play",t),e.addEventListener("playing",t),function(){e.removeEventListener("play",t),e.removeEventListener("playing",t),cancelAnimationFrame(i.current)}}),[]),r.createElement("div",null,r.createElement("video",{ref:l,controls:!0,autoPlay:!1},r.createElement("source",{src:t,type:"audio/mpeg"})),r.createElement(E,{src:t,progress:a}),r.createElement(k.u,{src:t,progress:a}),r.createElement(s,{src:t,progress:a}))}function C(){var e,t=S((0,r.useState)(null),2),n=t[0],a=t[1],o=S((0,r.useState)("https://geo-samples.beatport.com/track/b0fa2729-248f-4fd8-8e7d-bd427c30919c.LOFI.mp3"),2),l=o[0],u=o[1],c=S((0,r.useState)(null),2),s=c[0],f=c[1],d=S((0,r.useState)(null),2),m=d[0],h=d[1],p=(0,r.useRef)(),v=(0,r.useRef)();return(0,r.useEffect)((function(){n&&s&&(M.setAccessToken(n),M.searchTracks(s).then(h,console.error))}),[n,s]),r.createElement("div",{className:i.Z.Search},r.createElement("h2",null,"Search"),r.createElement("div",null,r.createElement("label",null,r.createElement("span",null,"Token"),r.createElement("input",{ref:v,defaultValue:"",onFocus:function(e){return e.target.select()}})),r.createElement("button",{onClick:function(e){return fetch("https://spotify-web-api-token.herokuapp.com/token").then((function(e){return e.json()})).then((function(e){var t=e.token;return a(v.current.value=t)}))}},"Get")),r.createElement("div",null,r.createElement("label",null,r.createElement("span",null,"Query"),r.createElement("input",{ref:p,defaultValue:"artist:Beyoncé"})),r.createElement("button",{onClick:function(e){return a(v.current.value.trim())||f(p.current.value.trim())}},"Find")),l&&r.createElement(P,{key:l,src:l}),r.createElement("ul",null,null==m||null===(e=m.tracks)||void 0===e?void 0:e.items.map((function(e){var t=e.album,n=e.id,a=e.name,o=e.preview_url,l=e.type;return r.createElement("li",{key:n},r.createElement("div",null,"id: ",l," ",n),r.createElement("div",null,"name: ",a),r.createElement("div",null,"preview_url:"," ",r.createElement("a",{href:o,onClick:function(e){return e.preventDefault()||u(o)}},o)),function(e){var t=e.artists,n=e.id,a=e.images,o=e.name,l=e.type;return r.createElement("div",null,r.createElement("div",null,"id: ",l," ",n),r.createElement("div",null,"artists: ",t.map((function(e){return e.name})).join(", ")),r.createElement("div",null,"name: ",o),r.createElement("div",null,a.sort((function(e,t){return e.width-t.width})).slice(0,1).map((function(e,t){var n=e.width,a=e.height,l=e.url;return r.createElement("img",{key:t,src:l,width:n,height:a,alt:o})}))))}(t))}))),r.createElement("pre",null,JSON.stringify(m,null,2)))}},7789:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(9601),a=n.n(r),o=n(2609),l=n.n(o)()(a());l.push([e.id,".CKgSghNKpREBuzbA7Ykt{display:flex;flex-direction:column}.MN3HVNw04LViHBlky330{display:flex;flex-direction:row;margin:2rem;align-items:center}.WkiRKpF351IO1uxS5kA_{width:4em;height:4em;margin:1em;border:2px solid currentColor;border-radius:50%}.veOat6GMQHaV_OvPnyuJ{color:green}.w3mVggYuPlb6ubmpMj69{color:red}.MMKvc1s1Dmbxl193AhLd{flex:1;margin:1em;position:relative}.MMKvc1s1Dmbxl193AhLd canvas{display:block;width:100%;height:8em}.MMKvc1s1Dmbxl193AhLd .hQ3Xho1E4oM84JfXXQSA{position:absolute;z-index:-1;left:0;width:0;top:0;bottom:0;background-color:#d3d3d3}",""]),l.locals={Player:"CKgSghNKpREBuzbA7Ykt",Container:"MN3HVNw04LViHBlky330",Button:"WkiRKpF351IO1uxS5kA_",Button__Play:"veOat6GMQHaV_OvPnyuJ",Button__Stop:"w3mVggYuPlb6ubmpMj69",Waveform:"MMKvc1s1Dmbxl193AhLd",Progress:"hQ3Xho1E4oM84JfXXQSA"};const i=l},204:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(9601),a=n.n(r),o=n(2609),l=n.n(o)()(a());l.push([e.id,".lfeSvZW11NcsdblvlBkp{display:flex;flex-direction:column}.uR71kJYLVWgDGlNf64Vl{flex:1;margin:1em;position:relative}.uR71kJYLVWgDGlNf64Vl canvas{display:block;height:8em}.uR71kJYLVWgDGlNf64Vl .F0CuPTVNlnd9xRr0meI0{position:absolute;z-index:-1;left:0;width:0;top:0;bottom:0;background-color:#d3d3d3}.vx6pGbp7BjnjJLBxpT0i{flex:1;margin:1em;position:relative}.vx6pGbp7BjnjJLBxpT0i svg{display:block;width:100%;height:8em}.vx6pGbp7BjnjJLBxpT0i svg .oDtmvHDnFFt7VpBU7yls{fill:red}.vx6pGbp7BjnjJLBxpT0i .F0CuPTVNlnd9xRr0meI0{position:absolute;z-index:-1;left:0;width:0;top:0;bottom:0;background-color:#d3d3d3}",""]),l.locals={Search:"lfeSvZW11NcsdblvlBkp",Spectrogram:"uR71kJYLVWgDGlNf64Vl",Progress:"F0CuPTVNlnd9xRr0meI0",Beats:"vx6pGbp7BjnjJLBxpT0i",ProgressBar:"oDtmvHDnFFt7VpBU7yls"};const i=l},3100:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(6062),a=n.n(r),o=n(4036),l=n.n(o),i=n(6793),u=n.n(i),c=n(7892),s=n.n(c),f=n(1173),d=n.n(f),m=n(2464),h=n.n(m),p=n(7789),v={};v.styleTagTransform=h(),v.setAttributes=s(),v.insert=u().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=d();var g=a()(p.default,v);if(!p.default.locals||e.hot.invalidate){var y=!p.default.locals,b=y?p:p.default.locals;e.hot.accept(7789,(t=>{p=n(7789),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(b,y?p:p.default.locals,y)?(b=y?p:p.default.locals,g(p.default)):e.hot.invalidate()}))}e.hot.dispose((function(){g()}));const w=p.default&&p.default.locals?p.default.locals:void 0},3738:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(6062),a=n.n(r),o=n(4036),l=n.n(o),i=n(6793),u=n.n(i),c=n(7892),s=n.n(c),f=n(1173),d=n.n(f),m=n(2464),h=n.n(m),p=n(204),v={};v.styleTagTransform=h(),v.setAttributes=s(),v.insert=u().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=d();var g=a()(p.default,v);if(!p.default.locals||e.hot.invalidate){var y=!p.default.locals,b=y?p:p.default.locals;e.hot.accept(204,(t=>{p=n(204),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(b,y?p:p.default.locals,y)?(b=y?p:p.default.locals,g(p.default)):e.hot.invalidate()}))}e.hot.dispose((function(){g()}));const w=p.default&&p.default.locals?p.default.locals:void 0}}]);