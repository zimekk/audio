"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[538],{5538:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(2784),a=n(3691),o=n(2423),u=n(357),l=n(8243);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{u||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=new a.Sampler({urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"}).toDestination();function f(){var e=i((0,r.useState)([]),2),t=e[0],n=e[1],a=i((0,r.useState)(""),2),o=a[0],u=a[1];(0,r.useEffect)((function(){var e=function(){return n(l.u5.inputs.map((function(e){return{id:e.id,manufacturer:e.manufacturer,name:e.name,type:e.type}})))},t=function(t){var n=t.target,r=t.type;console.log({target:n,type:r}),e()};return l.u5.addListener("connected",t),l.u5.addListener("disconnected",t),l.u5.enable().then(e).catch(console.error),function(){l.u5.removeListener("connected",t),l.u5.removeListener("disconnected",t)}}),[]);var c=(0,r.useMemo)((function(){return o?l.u5.getInputById(o):null}),[o]);return(0,r.useEffect)((function(){if(c){var e=function(e){console.info(e),s.triggerAttack("".concat(e.note.name).concat(e.note.octave))},t=function(e){console.info(e),s.triggerRelease("".concat(e.note.name).concat(e.note.octave))};return c.addListener("noteon",e),c.addListener("noteoff",t),function(){c.removeListener("noteon",e),c.removeListener("noteoff",t)}}}),[c]),r.createElement("div",null,r.createElement("label",null,r.createElement("span",null,"midi in:")),r.createElement("select",{value:o,onChange:(0,r.useCallback)((function(e){var t=e.target;return u(t.value)}),[])},r.createElement("option",{value:""},"none"),t.map((function(e){var t=e.id,n=e.manufacturer,a=e.name,o=e.type;return r.createElement("option",{key:t,value:t},n," ",a," (",o,")")}))))}var m=n(8930);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r,a,o,u){try{var l=e[o](u),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){p(o,r,a,u,l,"next",e)}function l(e){p(o,r,a,u,l,"throw",e)}u(void 0)}))}}var y=(0,u.k)(v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Midi.fromUrl(n(8065).Z);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));function h(){var e,t,n=y.read(),o=n.name,u=n.duration,l=n.durationTicks,i=n.tracks,c=(e=(0,r.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{u||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=c[0],p=c[1];return console.log({name:o,duration:u,durationTicks:l,tracks:i}),(0,r.useEffect)((function(){if(s){var e=[],t=a.now()+.5;return i.forEach((function(n){var r=new a.PolySynth(a.Synth,{envelope:{attack:.02,decay:.1,sustain:.3,release:1}}).toDestination();e.push(r),n.notes.forEach((function(e){r.triggerAttackRelease(e.name,e.duration,e.time+t,e.velocity)}))})),function(){for(;e.length;){var t=e.pop();t&&(t.context._timeouts.cancel(0),t.dispose())}}}}),[s,i]),r.createElement("div",{className:m.Z.Section},r.createElement("h3",null,"Midi"),r.createElement("div",null,o),r.createElement("div",null,s?r.createElement("button",{onClick:function(e){return e.preventDefault(),p(!1)}},"Stop"):r.createElement("button",{onClick:function(e){return e.preventDefault(),p(!0)}},"Play")),r.createElement(f,null))}},7150:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var r=n(9601),a=n.n(r),o=n(2609),u=n.n(o)()(a());u.push([e.id,".GR6_DaZtfOkTGsgLdPYo{display:block}",""]),u.locals={Section:"GR6_DaZtfOkTGsgLdPYo"};const l=u},8065:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"cfe23cb6e3ba37bfbe92a47c5926047e.mid"},8930:(e,t,n)=>{n.d(t,{Z:()=>A});var r=n(6062),a=n.n(r),o=n(4036),u=n.n(o),l=n(6793),i=n.n(l),c=n(7892),s=n.n(c),f=n(1173),m=n.n(f),d=n(2464),p=n.n(d),v=n(7150),y={};y.styleTagTransform=p(),y.setAttributes=s(),y.insert=i().bind(null,"head"),y.domAPI=u(),y.insertStyleElement=m();var h=a()(v.default,y);if(!v.default.locals||e.hot.invalidate){var b=!v.default.locals,g=b?v:v.default.locals;e.hot.accept(7150,(t=>{v=n(7150),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(g,b?v:v.default.locals,b)?(g=b?v:v.default.locals,h(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){h()}));const A=v.default&&v.default.locals?v.default.locals:void 0}}]);