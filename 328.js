"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[328],{4328:(e,t,o)=>{o.r(t),o.d(t,{default:()=>G});var n=o(2784),r=o(3752),a=o(3919),l=o(1148),s=o(5120),c=o(9962),i=o(9054),p=o(7984),d=o(6619),u=o(8795),f=o(9369),m=o(1348),g=o(643);const b=[].concat(["E4","D4","B3","B3","","E4","D4","B3","B3","","E4","D4","B3","B3","","B3","D4","G3","G3","","E4","D4","B3","A3","G3","","E4","D4","B3","B3","","E4","D4","B3","A3","G3","A3","B3","D4","E3",""]).concat([]||0).concat([]||0).reverse().map((e=>e.replace(/(\d)SH/,"#$1")));var x=o(2779),y=o.n(x),h=o(2144);const v=Object.entries({C5:"a","C#5":"w",D5:"s","D#5":"e",E5:"d",F5:"f","F#5":"t",G5:"g","G#5":"y",A5:"h","A#5":"u",B5:"j",C6:"k","C#6":"o",D6:"l","D#6":"p",E6:";",F6:"'"}).reduce(((e,[t,o])=>Object.assign(e,{[r.mb(t).transpose(-24).toNote()]:o})),{});function E({note:e,color:t,synth:o}){return e?n.createElement("button",{className:h.Z.Note,style:{background:t,color:"black"===t?"#ccc":"black"},onMouseDown:t=>o.triggerAttack(e),onMouseUp:t=>o.triggerRelease(e)},v[e]&&n.createElement("i",null,v[e]),e):n.createElement("span",{className:h.Z.Space})}function w({octave:e=1,synth:t}){const o=12*e,a=[0,2,4,5,7,9,11].map((e=>e+o)),l=[0,1,3,0,6,8,10,0].map((e=>e?e+o:0));return n.createElement("div",{className:h.Z.Octave},n.createElement("div",{className:h.Z.WhiteNotes},a.map((e=>r.mb(e).toNote())).map(((e,o)=>n.createElement(E,{key:o,color:"white",note:e,synth:t})))),n.createElement("div",{className:h.Z.BlackNotes},l.map((e=>e&&r.mb(e).toNote())).map(((e,o)=>n.createElement(E,{key:o,color:"black",note:e,synth:t})))))}function k({rootoctave:e=4,octaves:t=4,synth:o}){return n.createElement("div",{className:h.Z.Keyboard},[...Array(t)].map(((t,o)=>o+e)).map(((e,t)=>n.createElement(w,{key:t,octave:e,synth:o}))))}const O=(e,t=12)=>{return e+((o=e+7)-o%t)/t+(e=>(e-e%t)/t)(e);var o};function B({note:e,synth:t}){return n.createElement("button",{className:y()(h.Z.RollNote,e.match(/#/)&&h.Z.sharp),style:{left:`${O(r.mb(e).toMidi()-48)}em`},onMouseDown:o=>t.triggerAttack(e),onMouseUp:o=>t.triggerRelease(e)},n.createElement("span",null,e))}function _({notes:e,synth:t}){const[o,r]=(0,n.useState)(!1),b=(0,n.useRef)(null),x=(0,n.useMemo)((()=>new l.x),[]),y=(0,n.useMemo)((()=>new l.x),[]),v=(0,n.useMemo)((()=>(0,s.of)(void 0).pipe((0,c.j)((e=>{return t=e,a.y.create((e=>{requestAnimationFrame((o=>{const n=t?(o-t.frameStartTime)/1e3:0;e.next({frameStartTime:o,deltaTime:n})}))}));var t})),(0,i.h)((e=>void 0!==e)),(0,p.U)((e=>e.deltaTime)),(0,d.B)())),[]);return(0,n.useEffect)((()=>{const e=v.pipe((0,u.M)(x),(0,i.h)((([e,t])=>t))).subscribe((()=>{if(b.current){const e=b.current;e.scrollTop>0?e.scrollTop-=2:x.next(!1)}}));return()=>e.unsubscribe()}),[v]),(0,n.useEffect)((()=>{const o=y.pipe((0,p.U)((t=>e[Math.round((t.scrollTop+500-100-360)/36)])),(0,f.x)(),(0,m.b)((e=>console.log({note:e}))),(0,i.h)(Boolean),(0,m.b)((e=>t.triggerAttack(e))),(0,g.g)(250),(0,m.b)((e=>t.triggerRelease(e)))).subscribe((e=>{}));return()=>o.unsubscribe()}),[y]),(0,n.useEffect)((()=>{const e=x.subscribe((e=>{const t=b.current;e&&t&&0===t.scrollTop&&(t.scrollTop=t.scrollHeight),r(e)}));return()=>e.unsubscribe()}),[x]),n.createElement("div",null,o?n.createElement("button",{onClick:e=>(e.stopPropagation(),x.next(!1))},"stop"):n.createElement("button",{onClick:e=>(e.stopPropagation(),x.next(!0))},"play"),n.createElement("div",{ref:b,className:h.Z.Roll,onScroll:(0,n.useCallback)((({target:e})=>y.next(e)),[])},n.createElement("div",{className:h.Z.Inner},e.map(((e,o)=>n.createElement(B,{key:o,note:e,synth:t}))))))}function G(){const e=(()=>{const[e]=(0,n.useState)((()=>new r.v2(r.op,{volume:-8,oscillator:{type:"square8"},envelope:{attack:.05,decay:.3,sustain:.4,release:.8},filterEnvelope:{attack:.001,decay:.7,sustain:.1,release:.8,baseFrequency:300,octaves:4}}).toDestination()));return e})();return(e=>{const t=Object.entries(v).reduce(((e,[t,o])=>Object.assign(e,{[{";":"Semicolon","'":"Quote"}[o]||`Key${o.toUpperCase()}`]:t})),{});(0,n.useEffect)((()=>{const o=o=>t[o.code]&&e.triggerAttack(t[o.code]),n=o=>t[o.code]&&e.triggerRelease(t[o.code]);return document.addEventListener("keydown",o),document.addEventListener("keyup",n),()=>{document.removeEventListener("keydown",o),document.removeEventListener("keyup",n)}}),[])})(e),n.createElement("div",null,"Piano",n.createElement(_,{notes:b,synth:e}),n.createElement(k,{synth:e}),n.createElement("div",null,n.createElement("a",{href:"#"},"https://musiclab.chromeexperiments.com/Shared-Piano/"),n.createElement("a",{href:"#"},"https://github.com/Monika-After-Story/MonikaModDev/issues/5712")))}},8143:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var n=o(9601),r=o.n(n),a=o(2609),l=o.n(a),s=o(8991),c=o.n(s),i=new URL(o(3715),o.b),p=l()(r()),d=c()(i);p.push([e.id,".tl_c1qJYTb5yZEiHwKkb{border:1px solid #d3d3d3;padding:0;outline:none;transition:background-color .2s;border-radius:2px;font-size:9px}.tl_c1qJYTb5yZEiHwKkb:focus{border-color:gray}.xedOmG_wUpF499FfpxBO{display:flex;position:relative}.xedOmG_wUpF499FfpxBO .tl_c1qJYTb5yZEiHwKkb,.xedOmG_wUpF499FfpxBO .vEdUZpIgLUgprvHGy89e{display:flex;flex:1;flex-direction:column}.xedOmG_wUpF499FfpxBO .tl_c1qJYTb5yZEiHwKkb{z-index:1;align-items:center;justify-content:end}.xedOmG_wUpF499FfpxBO .tl_c1qJYTb5yZEiHwKkb i{margin:.5em 0;font-size:larger;font-weight:bold}.xedOmG_wUpF499FfpxBO .vEdUZpIgLUgprvHGy89e{pointer-events:none}.xedOmG_wUpF499FfpxBO .vEdUZpIgLUgprvHGy89e:first-of-type,.xedOmG_wUpF499FfpxBO .vEdUZpIgLUgprvHGy89e:last-of-type{flex-grow:.5}.xedOmG_wUpF499FfpxBO .MTvQk2t6H4kpI9hiG0N0,.xedOmG_wUpF499FfpxBO .Y3ARd6LKLk7oRKYGHK5o{position:absolute;display:flex;flex-direction:row;flex-grow:1}.xedOmG_wUpF499FfpxBO .MTvQk2t6H4kpI9hiG0N0{width:100%;height:100%}.xedOmG_wUpF499FfpxBO .Y3ARd6LKLk7oRKYGHK5o{width:100%;height:55%}._8DbB5CERGA5bp_CPPh5{display:flex;position:relative;top:-100px;height:0;background-color:#fff;opacity:.8}._8DbB5CERGA5bp_CPPh5 .xedOmG_wUpF499FfpxBO{flex-grow:1;height:80px}.to5WNLg1CzgQJEw4BWl7{position:relative;display:flex;flex-direction:column;width:100%;height:500px;overflow-y:scroll}.to5WNLg1CzgQJEw4BWl7 .YSOWVtYln3cyrrmD8Of_{display:flex;position:relative;font-size:1.7857142857vw;border:1px solid red;box-sizing:border-box;background:rgba(255,0,0,.6);opacity:.8;color:#fff;width:2em;height:20px;margin:8px 0;padding:0;align-items:center;justify-content:center}.to5WNLg1CzgQJEw4BWl7 .YSOWVtYln3cyrrmD8Of_.xI2VmWOcs2MgyyQUklLA{background:rgba(255,128,0,.2);color:red}.to5WNLg1CzgQJEw4BWl7 .YSOWVtYln3cyrrmD8Of_:hover{opacity:1}.to5WNLg1CzgQJEw4BWl7 .YSOWVtYln3cyrrmD8Of_ span{font-family:Arial;font-size:9px}.to5WNLg1CzgQJEw4BWl7 .iNXp4jf9N6exbktzLAso{display:flex;flex-direction:column;padding:360px 0;flex-grow:1;background:#fff url("+d+");background-size:7.1428571429vw 72px}",""]),p.locals={Note:"tl_c1qJYTb5yZEiHwKkb",Octave:"xedOmG_wUpF499FfpxBO",Space:"vEdUZpIgLUgprvHGy89e",WhiteNotes:"MTvQk2t6H4kpI9hiG0N0",BlackNotes:"Y3ARd6LKLk7oRKYGHK5o",Keyboard:"_8DbB5CERGA5bp_CPPh5",Roll:"to5WNLg1CzgQJEw4BWl7",RollNote:"YSOWVtYln3cyrrmD8Of_",sharp:"xI2VmWOcs2MgyyQUklLA",Inner:"iNXp4jf9N6exbktzLAso"};const u=p},2144:(e,t,o)=>{o.d(t,{Z:()=>v});var n=o(6062),r=o.n(n),a=o(4036),l=o.n(a),s=o(6793),c=o.n(s),i=o(7892),p=o.n(i),d=o(1173),u=o.n(d),f=o(2464),m=o.n(f),g=o(8143),b={};b.styleTagTransform=m(),b.setAttributes=p(),b.insert=c().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=u();var x=r()(g.default,b);if(!g.default.locals||e.hot.invalidate){var y=!g.default.locals,h=y?g:g.default.locals;e.hot.accept(8143,(t=>{g=o(8143),function(e,t,o){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!o||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(o&&"default"===n||e[n]))return!1;return!0}(h,y?g:g.default.locals,y)?(h=y?g:g.default.locals,x(g.default)):e.hot.invalidate()}))}e.hot.dispose((function(){x()}));const v=g.default&&g.default.locals?g.default.locals:void 0},3715:e=>{e.exports='data:image/svg+xml,        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" fill-opacity=".05" >        <rect x="100" width="100" height="100" />        <rect y="100" width="100" height="100" />        </svg>'}}]);