/*! For license information please see 566.js.LICENSE.txt */
"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[566],{2566:(e,t,o)=>{o.r(t),o.d(t,{default:()=>$});var n=o(2784),r=o(3691),g=o(1148),i=o(1763);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,g,i,p=[],u=!0,a=!1;try{if(g=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;u=!1}else for(;!(u=(n=g.call(o)).done)&&(p.push(n.value),p.length!==t);u=!0);}catch(e){a=!0,r=e}finally{try{if(!u&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(a)throw r}}return p}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function a(e){var t=e.keyDown,o=e.keyUp,r=p((0,n.useState)([]),2),g=r[0],u=r[1],a=p((0,n.useState)(""),2),c=a[0],m=a[1];(0,n.useEffect)((function(){var e=function(){return u((function(e){return 0===e.length&&i.u5.inputs.length>0?m(i.u5.inputs[0].id):e.length>0&&0===i.u5.inputs.length&&m(""),i.u5.inputs.map((function(e){return{id:e.id,manufacturer:e.manufacturer,name:e.name,type:e.type}}))}))},t=function(t){var o=t.target,n=t.type;console.log({target:o,type:n}),e()};return i.u5.addListener("connected",t),i.u5.addListener("disconnected",t),i.u5.enable().then(e).catch(console.error),function(){i.u5.removeListener("connected",t),i.u5.removeListener("disconnected",t)}}),[]);var l=(0,n.useMemo)((function(){return c?i.u5.getInputById(c):null}),[c]);return(0,n.useEffect)((function(){if(l){var e=function(e){console.info(e),t(e.note.identifier)},n=function(e){console.info(e),o(e.note.identifier)};return l.addListener("noteon",e),l.addListener("noteoff",n),function(){l.removeListener("noteon",e),l.removeListener("noteoff",n)}}}),[l]),n.createElement("div",null,n.createElement("label",null,n.createElement("span",null,"midi in:")),n.createElement("select",{value:c,onChange:(0,n.useCallback)((function(e){var t=e.target;return m(t.value)}),[])},0===g.length&&n.createElement("option",{value:""},"none"),g.map((function(e){var t=e.id,o=e.manufacturer,r=e.name,g=e.type;return n.createElement("option",{key:t,value:t},o," ",r," (",g,")")}))))}var c=o(2779),m=o.n(c),l=o(2144);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){y(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function y(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,g,i,p=[],u=!0,a=!1;try{if(g=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;u=!1}else for(;!(u=(n=g.call(o)).done)&&(p.push(n.value),p.length!==t);u=!0);}catch(e){a=!0,r=e}finally{try{if(!u&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(a)throw r}}return p}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return b(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var A=Object.entries({C5:"a","C#5":"w",D5:"s","D#5":"e",E5:"d",F5:"f","F#5":"t",G5:"g","G#5":"y",A5:"h","A#5":"u",B5:"j",C6:"k","C#6":"o",D6:"l","D#6":"p",E6:";",F6:"'"}).reduce((function(e,t){var o=v(t,2),n=o[0],g=o[1];return Object.assign(e,y({},r.Midi(n).transpose(-24).toNote(),g))}),{}),C=function(){var e=v((0,n.useState)((function(){return[]})),2),t=e[0],o=e[1],r=Object.entries(A).reduce((function(e,t){var o=v(t,2),n=o[0],r=o[1];return Object.assign(e,y({},{";":"Semicolon","'":"Quote"}[r]||"Key".concat(r.toUpperCase()),n))}),{});return(0,n.useEffect)((function(){var e=function(e){return r[e.code]&&o((function(t){return t.concat(r[e.code])}))},t=function(e){return r[e.code]&&o((function(t){return t.filter((function(t){return t!==r[e.code]}))}))};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[o]),t};function E(e){var t=e.note,o=e.keyDown,r=e.keyUp,g=e.pressed,i=v((0,n.useState)({enter:!1,press:!1}),2),p=i[0],u=p.enter,a=p.press,c=i[1],s=(0,n.useMemo)((function(){return g||u&&a}),[u,a,g]);return(0,n.useEffect)((function(){return s?o(t):r(t)}),[s]),t?n.createElement("span",{className:m()(l.Z.Note,s&&l.Z.pressed),onMouseEnter:function(e){return c((function(t){return d(d({},t),{},{enter:!0,press:!!e.buttons})}))},onMouseLeave:function(){return c((function(e){return d(d({},e),{},{enter:!1})}))},onMouseDown:function(e){return e.preventDefault(),c((function(e){return d(d({},e),{},{press:!0})}))},onMouseUp:function(){return c((function(e){return d(d({},e),{},{press:!1})}))}},A[t]&&n.createElement("i",null,A[t]),t):n.createElement("span",{className:l.Z.Space})}function F(e){var t=e.octave,o=void 0===t?1:t,g=e.keys,i=e.keyDown,p=e.keyUp,u=12*o,a=[0,2,4,5,7,9,11].map((function(e){return e+u})),c=[0,1,3,0,6,8,10,0].map((function(e){return e?e+u:0}));return n.createElement("div",{className:l.Z.Octave},n.createElement("div",{className:l.Z.WhiteNotes},a.map((function(e){return r.Midi(e).toNote()})).map((function(e,t){return n.createElement(E,{key:t,note:e,keyDown:i,keyUp:p,pressed:g.includes(e)})}))),n.createElement("div",{className:l.Z.BlackNotes},c.map((function(e){return e&&r.Midi(e).toNote()})).map((function(e,t){return n.createElement(E,{key:t,note:e,keyDown:i,keyUp:p,pressed:g.includes(e)})}))))}function G(e){var t,o=e.rootoctave,r=void 0===o?4:o,g=e.octaves,i=void 0===g?4:g,p=e.keyDown,u=e.keyUp,a=e.pressed,c=C();return n.createElement("div",{className:l.Z.Keyboard},(t=Array(i),function(e){if(Array.isArray(e))return b(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e,t){return t+r})).map((function(e,t){return n.createElement(F,{key:t,octave:e,keys:c.concat(a),keyDown:p,keyUp:u})})))}var D=o(3919),w=o(9434),k=o(8025),x=o(9054),O=o(7984),B=o(6619),S=o(8795),j=o(8788),L=o(2423),_=o(357);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}var T=["note","durationTicks"];function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,g,i,p=[],u=!0,a=!1;try{if(g=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;u=!1}else for(;!(u=(n=g.call(o)).done)&&(p.push(n.value),p.length!==t);u=!0);}catch(e){a=!0,r=e}finally{try{if(!u&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(a)throw r}}return p}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},I.apply(this,arguments)}function Z(){Z=function(){return e};var e={},t=Object.prototype,o=t.hasOwnProperty,n=Object.defineProperty||function(e,t,o){e[t]=o.value},r="function"==typeof Symbol?Symbol:{},g=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",p=r.toStringTag||"@@toStringTag";function u(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,o){return e[t]=o}}function a(e,t,o,r){var g=t&&t.prototype instanceof l?t:l,i=Object.create(g.prototype),p=new D(r||[]);return n(i,"_invoke",{value:C(e,o,p)}),i}function c(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}e.wrap=a;var m={};function l(){}function s(){}function f(){}var d={};u(d,g,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(w([])));v&&v!==t&&o.call(v,g)&&(d=v);var h=f.prototype=l.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(n,g,i,p){var u=c(e[n],e,g);if("throw"!==u.type){var a=u.arg,m=a.value;return m&&"object"==U(m)&&o.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,p)}),(function(e){r("throw",e,i,p)})):t.resolve(m).then((function(e){a.value=e,i(a)}),(function(e){return r("throw",e,i,p)}))}p(u.arg)}var g;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return g=g?g.then(n,n):n()}})}function C(e,t,o){var n="suspendedStart";return function(r,g){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw g;return{value:void 0,done:!0}}for(o.method=r,o.arg=g;;){var i=o.delegate;if(i){var p=E(i,o);if(p){if(p===m)continue;return p}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===n)throw n="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n="executing";var u=c(e,t,o);if("normal"===u.type){if(n=o.done?"completed":"suspendedYield",u.arg===m)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(n="completed",o.method="throw",o.arg=u.arg)}}}function E(e,t){var o=t.method,n=e.iterator[o];if(void 0===n)return t.delegate=null,"throw"===o&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==o&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var g=r.arg;return g?g.done?(t[e.resultName]=g.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):g:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function G(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function w(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:k}}function k(){return{value:void 0,done:!0}}return s.prototype=f,n(h,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:s,configurable:!0}),s.displayName=u(f,p,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,p,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},b(A.prototype),u(A.prototype,i,(function(){return this})),e.AsyncIterator=A,e.async=function(t,o,n,r,g){void 0===g&&(g=Promise);var i=new A(a(t,o,n,r),g);return e.isGeneratorFunction(o)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(h),u(h,p,"Generator"),u(h,g,(function(){return this})),u(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),o=[];for(var n in t)o.push(n);return o.reverse(),function e(){for(;o.length;){var n=o.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=w,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(o,n){return i.type="throw",i.arg=e,t.next=o,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var g=this.tryEntries[r],i=g.completion;if("root"===g.tryLoc)return n("end");if(g.tryLoc<=this.prev){var p=o.call(g,"catchLoc"),u=o.call(g,"finallyLoc");if(p&&u){if(this.prev<g.catchLoc)return n(g.catchLoc,!0);if(this.prev<g.finallyLoc)return n(g.finallyLoc)}else if(p){if(this.prev<g.catchLoc)return n(g.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<g.finallyLoc)return n(g.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var g=r;break}}g&&("break"===e||"continue"===e)&&g.tryLoc<=t&&t<=g.finallyLoc&&(g=null);var i=g?g.completion:{};return i.type=e,i.arg=t,g?(this.method="next",this.next=g.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),G(o),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n=o.completion;if("throw"===n.type){var r=n.arg;G(o)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:w(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=void 0),m}},e}function M(e,t,o,n,r,g,i){try{var p=e[g](i),u=p.value}catch(e){return void o(e)}p.done?t(u):Promise.resolve(u).then(n,r)}var Y=function(e){return D.y.create((function(t){requestAnimationFrame((function(o){var n=e?(o-e.frameStartTime)/1e3:0;t.next({frameStartTime:o,deltaTime:n})}))}))},K=function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return e+((t=e+7)-t%o)/o+function(e){return(e-e%o)/o}(e)},H=[o(8065).Z,o(9205).Z,o(9342).Z,o(4316).Z],R=(0,_.k)(function(){var e,t=(e=Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.Midi.fromUrl(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{name:e.t0.message,duration:0,durationTicks:0,tracks:[]});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})),function(){var t=this,o=arguments;return new Promise((function(n,r){var g=e.apply(t,o);function i(e){M(g,n,r,i,p,"next",e)}function p(e){M(g,n,r,i,p,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}());function W(e){var t=e.note,o=e.durationTicks,r=function(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},g=Object.keys(e);for(n=0;n<g.length;n++)o=g[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(n=0;n<g.length;n++)o=g[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}(e,T);return n.createElement("button",I({className:m()(l.Z.RollNote,t.name.match(/#/)&&l.Z.sharp),style:{position:"absolute",top:"".concat((o-t.ticks-t.durationTicks)/10,"px"),left:"".concat(K(t.midi-48),"em"),height:"".concat(t.durationTicks/10,"px")}},r),n.createElement("span",null,t.name))}function z(e){var t=e.notes$,o=N((0,n.useState)((function(){return H})),2),r=o[0],i=o[1],p=N((0,n.useState)((function(){return r[0]})),2),u=p[0],a=p[1],c=R.read(u),m=c.name,s=c.duration,f=c.durationTicks,d=c.tracks,y=N((0,n.useState)((function(){return[0]})),2),v=y[0],h=y[1],b=N((0,n.useState)(1),2),A=b[0],C=b[1],E=N((0,n.useState)(!1),2),F=E[0],G=E[1],D=(0,n.useRef)(A),L=(0,n.useRef)(null),_=(0,n.useMemo)((function(){return new g.x}),[]),U=(0,n.useMemo)((function(){return new g.x}),[]),T=(0,n.useMemo)((function(){return(0,w.of)(void 0).pipe((0,k.j)((function(e){return Y(e)})),(0,x.h)((function(e){return void 0!==e})),(0,O.U)((function(e){return e.deltaTime})),(0,B.B)())}),[]);console.log({name:m,duration:s,tracks:d,selected:v}),(0,n.useEffect)((function(){D.current=A}),[T,D,A]),(0,n.useEffect)((function(){var e=T.pipe((0,S.M)(_),(0,x.h)((function(e){var t=N(e,2);return t[0],t[1]}))).subscribe((function(){if(L.current){var e=L.current;e.scrollTop>0?e.scrollTop-=D.current:_.next(!1)}}));return function(){return e.unsubscribe()}}),[T,D]),(0,n.useEffect)((function(){var e=U.pipe((0,O.U)((function(e){return e.scrollTop})),(0,j.G)(),(0,O.U)((function(e){var t=N(e,2),o=t[0],n=t[1];return d.filter((function(e,t){return v.includes(t)})).map((function(e){return e.notes.filter((function(e){return t=(f-e.ticks)/10,n<=t&&t<o;var t}))})).flat()}))).subscribe((function(e){return t.next(e)}));return function(){return e.unsubscribe()}}),[U,t,d,v,f]),(0,n.useEffect)((function(){var e=_.subscribe((function(e){var t=L.current;e&&t&&0===t.scrollTop&&(t.scrollTop=t.scrollHeight),G(e)}));return function(){return e.unsubscribe()}}),[_]);var P=(0,n.useCallback)((function(e){var t=e.target;return h((function(e){return Boolean(console.log({selected:e,value:t.value}))||t.checked?e.concat(Number(t.value)):e.filter((function(e){return e!==Number(t.value)}))}))}),[h]);return n.createElement("div",null,n.createElement("fieldset",null,n.createElement("div",null,n.createElement("label",null,n.createElement("span",null,"Midi"),n.createElement("select",{value:u,onChange:(0,n.useCallback)((function(e){var t=e.target;return a(t.value),h([0])}),[])},r.map((function(e,t){return n.createElement("option",{key:t,value:e},e)})))),n.createElement("button",{onClick:function(e){return e.stopPropagation(),function(e){return(null==e?void 0:e.match(/.+$/))&&(i((function(t){return t.concat(e)})),a(e),h([0]))}(prompt("Midi file URL","https://tonejs.github.io/Midi/examples/bach_846.mid"))}},"add")),n.createElement("div",null,n.createElement("span",null,"Track"),d.map((function(e,t){var o=e.name;return n.createElement("label",{key:t},n.createElement("input",{type:"checkbox",value:t,checked:v.includes(t),onChange:P}),n.createElement("span",null,"#".concat(t," ").concat(o)))})),n.createElement("label",null,n.createElement("input",{type:"checkbox",checked:v.length===d.length,onChange:(0,n.useCallback)((function(e){var t=e.target;return h(t.checked?d.map((function(e,t){return t})):[])}),[d])}),n.createElement("strong",null,"toggle all"))),n.createElement("div",null,n.createElement("label",null,n.createElement("span",null,"Speed"),n.createElement("select",{value:A,onChange:(0,n.useCallback)((function(e){var t=e.target;return C(Number(t.value))}),[])},[1,2,3,4].map((function(e,t){return n.createElement("option",{key:t,value:e},e)})))),F?n.createElement("button",{onClick:function(e){return e.stopPropagation(),_.next(!1)}},"stop"):n.createElement("button",{onClick:function(e){return e.stopPropagation(),_.next(!0)}},"play"))),n.createElement("div",{ref:L,className:l.Z.Roll,onScroll:(0,n.useCallback)((function(e){var t=e.target;return U.next(t)}),[])},n.createElement("div",{className:l.Z.Inner,style:{height:"".concat(f/10,"px")}},d.filter((function(e,t){return v.includes(t)})).map((function(e){return e.notes.map((function(e,o){return n.createElement(W,{key:o,note:e,durationTicks:f,onMouseDown:function(o){return o.preventDefault(),t.next([e])}})}))})))))}function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,g,i,p=[],u=!0,a=!1;try{if(g=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;u=!1}else for(;!(u=(n=g.call(o)).done)&&(p.push(n.value),p.length!==t);u=!0);}catch(e){a=!0,r=e}finally{try{if(!u&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(a)throw r}}return p}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var V={"bass-electric":{"A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]","A#5":"As5.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]"},bassoon:{A3:"A3.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",E3:"E3.[mp3|ogg]",G1:"G1.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]"},cello:{E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]"},clarinet:{D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]",D5:"D5.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]",D2:"D2.[mp3|ogg]"},contrabass:{C1:"C1.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]",D1:"D1.[mp3|ogg]",E1:"E1.[mp3|ogg]",E2:"E2.[mp3|ogg]","F#0":"Fs0.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]",G0:"G0.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]",A1:"A1.[mp3|ogg]","A#0":"As0.[mp3|ogg]",B2:"B2.[mp3|ogg]"},flute:{A5:"A5.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]"},"french-horn":{D2:"D2.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]",F2:"F2.[mp3|ogg]",F4:"F4.[mp3|ogg]",G1:"G1.[mp3|ogg]",A0:"A0.[mp3|ogg]",A2:"A2.[mp3|ogg]",C1:"C1.[mp3|ogg]",C3:"C3.[mp3|ogg]"},"guitar-acoustic":{F3:"F3.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]",G1:"G1.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]","A#1":"As1.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]",B1:"B1.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D1:"D1.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]",E1:"E1.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]"},"guitar-electric":{"D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]",E2:"E2.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]"},"guitar-nylon":{"F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",G3:"G3.[mp3|ogg]",G5:"G3.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]","G#5":"Gs5.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]","A#5":"As5.[mp3|ogg]",B1:"B1.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D5:"D5.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]"},harmonium:{C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]",D5:"D5.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]"},harp:{C5:"C5.[mp3|ogg]",D2:"D2.[mp3|ogg]",D4:"D4.[mp3|ogg]",D6:"D6.[mp3|ogg]",D7:"D7.[mp3|ogg]",E1:"E1.[mp3|ogg]",E3:"E3.[mp3|ogg]",E5:"E5.[mp3|ogg]",F2:"F2.[mp3|ogg]",F4:"F4.[mp3|ogg]",F6:"F6.[mp3|ogg]",F7:"F7.[mp3|ogg]",G1:"G1.[mp3|ogg]",G3:"G3.[mp3|ogg]",G5:"G5.[mp3|ogg]",A2:"A2.[mp3|ogg]",A4:"A4.[mp3|ogg]",A6:"A6.[mp3|ogg]",B1:"B1.[mp3|ogg]",B3:"B3.[mp3|ogg]",B5:"B5.[mp3|ogg]",B6:"B6.[mp3|ogg]",C3:"C3.[mp3|ogg]"},organ:{C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",C1:"C1.[mp3|ogg]",C2:"C2.[mp3|ogg]"},piano:{A0:"A0.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",A6:"A6.[mp3|ogg]","A#0":"As0.[mp3|ogg]","A#1":"As1.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]","A#5":"As5.[mp3|ogg]","A#6":"As6.[mp3|ogg]",B0:"B0.[mp3|ogg]",B1:"B1.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]",B5:"B5.[mp3|ogg]",B6:"B6.[mp3|ogg]",C0:"C0.[mp3|ogg]",C1:"C1.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]",C7:"C7.[mp3|ogg]","C#0":"Cs0.[mp3|ogg]","C#1":"Cs1.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]","C#6":"Cs6.[mp3|ogg]",D0:"D0.[mp3|ogg]",D1:"D1.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]",D5:"D5.[mp3|ogg]",D6:"D6.[mp3|ogg]","D#0":"Ds0.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","D#6":"Ds6.[mp3|ogg]",E0:"E0.[mp3|ogg]",E1:"E1.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",E6:"E6.[mp3|ogg]",F0:"F0.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]",F5:"F5.[mp3|ogg]",F6:"F6.[mp3|ogg]","F#0":"Fs0.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]","F#6":"Fs6.[mp3|ogg]",G0:"G0.[mp3|ogg]",G1:"G1.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]",G6:"G6.[mp3|ogg]","G#0":"Gs0.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]","G#5":"Gs5.[mp3|ogg]","G#6":"Gs6.[mp3|ogg]"},saxophone:{"D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]"},trombone:{"A#2":"As2.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]","C#1":"Cs1.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","A#0":"As0.[mp3|ogg]","A#1":"As1.[mp3|ogg]"},trumpet:{C5:"C5.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]",G3:"G3.[mp3|ogg]",A2:"A2.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#3":"As3.[mp3|ogg]",C3:"C3.[mp3|ogg]"},tuba:{"A#1":"As1.[mp3|ogg]","A#2":"As2.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]",F0:"F0.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]","A#0":"As0.[mp3|ogg]"},violin:{A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",A6:"A6.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]",C7:"C7.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",E6:"E6.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]",G6:"G6.[mp3|ogg]"},xylophone:{C7:"C7.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]",G6:"G6.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]"}},X=function(e){var t=Q((0,n.useState)(null),2),o=t[0],g=t[1];return(0,n.useEffect)((function(){var t=new r.Sampler({baseUrl:"https://nbrosowsky.github.io/tonejs-instruments/samples/".concat(e,"/"),urls:Object.entries(V[e]).reduce((function(e,t){var o=Q(t,2),n=o[0],r=o[1];return Object.assign(e,function(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==J(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!==J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===J(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}({},n,r.replace("[mp3|ogg]","mp3")))}),{}),release:1,onload:function(){g(t)}}).toDestination()}),[e]),o};function $(){var e=(0,n.useMemo)((function(){return new g.x}),[]),t=Q((0,n.useState)((function(){return[]})),2),o=t[0],i=t[1],p=Q((0,n.useState)("guitar-nylon"),2),u=p[0],c=p[1],m=X(u),l=(0,n.useCallback)((function(e){return m&&m.triggerAttack(e),i((function(t){return t.concat(e)}))}),[m]),s=(0,n.useCallback)((function(e){return m&&m.triggerRelease(e),i((function(t){return t.filter((function(t){return t!==e}))}))}),[m]);return(0,n.useEffect)((function(){var t=e.subscribe((function(e){return t=r.now(),e.forEach((function(e){m&&m.triggerAttackRelease(e.name,e.duration,t,e.velocity),r.Draw.schedule((function(){i((function(t){return t.concat(e.name)}))}),t),r.Draw.schedule((function(){i((function(t){return t.filter((function(t){return t!==e.name}))}))}),t+e.duration)}));var t}));return function(){return t.unsubscribe()}}),[e,m,i]),n.createElement("div",null,"Piano",n.createElement("select",{value:u,onChange:(0,n.useCallback)((function(e){var t=e.target;return c(t.value)}),[])},Object.keys(V).map((function(e,t){return n.createElement("option",{key:t,value:e},e)}))),n.createElement(a,{keyDown:l,keyUp:s}),n.createElement(z,{notes$:e}),m&&n.createElement(G,{keyDown:l,keyUp:s,pressed:o}))}},8143:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var n=o(9601),r=o.n(n),g=o(2609),i=o.n(g),p=o(8991),u=o.n(p),a=new URL(o(3715),o.b),c=i()(r()),m=u()(a);c.push([e.id,".tl_c1qJYTb5yZEiHwKkb{border:1px solid #d3d3d3;padding:0;outline:none;transition:background-color .2s;border-radius:2px;font-size:9px}.tl_c1qJYTb5yZEiHwKkb:focus{border-color:gray}.xedOmG_wUpF499FfpxBO{display:flex;position:relative}.xedOmG_wUpF499FfpxBO .tl_c1qJYTb5yZEiHwKkb,.xedOmG_wUpF499FfpxBO .vEdUZpIgLUgprvHGy89e{display:flex;flex:1;flex-direction:column}.xedOmG_wUpF499FfpxBO .tl_c1qJYTb5yZEiHwKkb{z-index:1;align-items:center;justify-content:end;font-family:Arial;font-size:9px}.xedOmG_wUpF499FfpxBO .tl_c1qJYTb5yZEiHwKkb i{margin:.5em 0;font-size:larger;font-weight:bold}.xedOmG_wUpF499FfpxBO .vEdUZpIgLUgprvHGy89e{pointer-events:none}.xedOmG_wUpF499FfpxBO .vEdUZpIgLUgprvHGy89e:first-of-type,.xedOmG_wUpF499FfpxBO .vEdUZpIgLUgprvHGy89e:last-of-type{flex-grow:.5}.xedOmG_wUpF499FfpxBO .MTvQk2t6H4kpI9hiG0N0,.xedOmG_wUpF499FfpxBO .Y3ARd6LKLk7oRKYGHK5o{position:absolute;display:flex;flex-direction:row;flex-grow:1}.xedOmG_wUpF499FfpxBO .MTvQk2t6H4kpI9hiG0N0{width:100%;height:100%}.xedOmG_wUpF499FfpxBO .MTvQk2t6H4kpI9hiG0N0 .tl_c1qJYTb5yZEiHwKkb{background-color:#fff;color:#000}.xedOmG_wUpF499FfpxBO .MTvQk2t6H4kpI9hiG0N0 .tl_c1qJYTb5yZEiHwKkb.C1VXh_7oUTVqX2wuk8zM{border-color:red}.xedOmG_wUpF499FfpxBO .Y3ARd6LKLk7oRKYGHK5o{width:100%;height:55%}.xedOmG_wUpF499FfpxBO .Y3ARd6LKLk7oRKYGHK5o .tl_c1qJYTb5yZEiHwKkb{background-color:#000;color:#ccc}.xedOmG_wUpF499FfpxBO .Y3ARd6LKLk7oRKYGHK5o .tl_c1qJYTb5yZEiHwKkb.C1VXh_7oUTVqX2wuk8zM{border-color:red}._8DbB5CERGA5bp_CPPh5{display:flex;position:relative;top:-100px;height:0;background-color:#fff;opacity:.8}._8DbB5CERGA5bp_CPPh5 .xedOmG_wUpF499FfpxBO{flex-grow:1;height:80px}.to5WNLg1CzgQJEw4BWl7{position:relative;display:flex;flex-direction:row;width:100%;height:500px;overflow-y:scroll}.to5WNLg1CzgQJEw4BWl7 .YSOWVtYln3cyrrmD8Of_{position:absolute;font-size:1.7857142857vw;border:1px solid red;box-sizing:border-box;background:rgba(255,128,0,.2);color:red;opacity:.8;width:2em;margin:400px 0 0;padding:0;align-items:center;justify-content:center}.to5WNLg1CzgQJEw4BWl7 .YSOWVtYln3cyrrmD8Of_.xI2VmWOcs2MgyyQUklLA{background:rgba(255,0,0,.6);color:#fff}.to5WNLg1CzgQJEw4BWl7 .YSOWVtYln3cyrrmD8Of_:hover{opacity:1}.to5WNLg1CzgQJEw4BWl7 .YSOWVtYln3cyrrmD8Of_ span{font-family:Arial;font-size:9px}.to5WNLg1CzgQJEw4BWl7 .iNXp4jf9N6exbktzLAso{display:flex;flex-direction:column;padding:360px 0;flex-grow:1;background:#fff url("+m+");background-size:7.1428571429vw 72px}",""]),c.locals={Note:"tl_c1qJYTb5yZEiHwKkb",Octave:"xedOmG_wUpF499FfpxBO",Space:"vEdUZpIgLUgprvHGy89e",WhiteNotes:"MTvQk2t6H4kpI9hiG0N0",BlackNotes:"Y3ARd6LKLk7oRKYGHK5o",pressed:"C1VXh_7oUTVqX2wuk8zM",Keyboard:"_8DbB5CERGA5bp_CPPh5",Roll:"to5WNLg1CzgQJEw4BWl7",RollNote:"YSOWVtYln3cyrrmD8Of_",sharp:"xI2VmWOcs2MgyyQUklLA",Inner:"iNXp4jf9N6exbktzLAso"};const l=c},9342:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"875ae3b74407297f3a51860f1a0353b0.mid"},9205:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"d1861a6e2649b4f97f31196829ac89c3.mid"},8065:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"cfe23cb6e3ba37bfbe92a47c5926047e.mid"},4316:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"95667c35c56500a40d9f72c749159ff3.mid"},2144:(e,t,o)=>{o.d(t,{Z:()=>A});var n=o(6062),r=o.n(n),g=o(4036),i=o.n(g),p=o(6793),u=o.n(p),a=o(7892),c=o.n(a),m=o(1173),l=o.n(m),s=o(2464),f=o.n(s),d=o(8143),y={};y.styleTagTransform=f(),y.setAttributes=c(),y.insert=u().bind(null,"head"),y.domAPI=i(),y.insertStyleElement=l();var v=r()(d.default,y);if(!d.default.locals||e.hot.invalidate){var h=!d.default.locals,b=h?d:d.default.locals;e.hot.accept(8143,(t=>{d=o(8143),function(e,t,o){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!o||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(o&&"default"===n||e[n]))return!1;return!0}(b,h?d:d.default.locals,h)?(b=h?d:d.default.locals,v(d.default)):e.hot.invalidate()}))}e.hot.dispose((function(){v()}));const A=d.default&&d.default.locals?d.default.locals:void 0},3715:e=>{e.exports='data:image/svg+xml,        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" fill-opacity=".05" >        <rect x="100" width="100" height="100" />        <rect y="100" width="100" height="100" />        </svg>'}}]);